ğŸ”¥ MASTER PROMPT / INSTRUKCJA DLA AI-DEVELOPERA
(do wklejenia w narzÄ™dzie AI tworzÄ…ce kod)
To jest finalna, kompletna specyfikacja zastÄ™pujÄ…ca moduÅ‚ â€szprosy V2â€.

ğŸ§© PROJEKT: SZPROSY V3 (REWRITE)
CEL
CaÅ‚kowicie zastÄ…piÄ‡ istniejÄ…cy moduÅ‚ â€szprosy V2â€, zachowujÄ…c jedynie koncepcjÄ™:
wirtualnego skrzydÅ‚a (canvas)
Nowy moduÅ‚ musi byÄ‡:
produkcyjny (realne dÅ‚ugoÅ›ci ciÄ™cia),
montaÅ¼owy (informacje dla montera),
niezaleÅ¼ny od innych moduÅ‚Ã³w aplikacji.

ğŸ— ARCHITEKTURA
ModuÅ‚:
feature_muntins_v3

Struktura:
ui/
canvas/
domain/
geometry/
calculations/
cut_optimizer/
database/


ğŸ—„ BAZA DANYCH (NIEZALEÅ»NA)
Room DB.
PROFILE
id
name
glass_offset_x
glass_offset_y
GLASS_BEAD
id
name
angle_face (10â€“40Â°)
effective_glass_offset
MUNTIN
id
name
width
thickness
PROJECT
frame_width
frame_height
profile_id
bead_id
LAYOUT
json_geometry

ğŸ“ MODEL GEOMETRYCZNY (KRYTYCZNE)
System NIE operuje na dÅ‚ugoÅ›ciach.
Model:
Node
- x
- y

Segment
- startNode
- endNode
- width
- angleStart
- angleEnd

Intersection
- type

Typy przeciÄ™Ä‡:
BEAD_EDGE
MUNTIN_EDGE
T_JOINT


ğŸ“ ZASADA WYMIAROWANIA
Wszystkie wymiary opisujÄ…:
OÅš SZPROSA + KIERUNEK POMIARU


ğŸ”© OBLICZENIA (CORE)
1ï¸âƒ£ Oblicz Å›wiatÅ‚o szyby
glassWidth  = frameWidth - 2*(offset + beadOffset)
glassHeight = frameHeight - 2*(offset + beadOffset)


2ï¸âƒ£ Generuj layout osi.

3ï¸âƒ£ UWZGLÄ˜DNIJ GRUBOÅšÄ† SZPROSA
PrzeciÄ™cia liczone:
EDGE TO EDGE

nie oÅ›â€“oÅ›.
GruboÅ›Ä‡ fizyczna wpÅ‚ywa na dÅ‚ugoÅ›Ä‡.

4ï¸âƒ£ DÅ‚ugoÅ›Ä‡ produkcyjna
Output:
REAL CUT LENGTH

mierzona po najdÅ‚uÅ¼szej pÅ‚aszczyÅºnie szprosa.

5ï¸âƒ£ Luz technologiczny
1 mm na kaÅ¼dy punkt styku


6ï¸âƒ£ Finalny wzÃ³r
L_final =
edge_distance
+ angle_correction_start
+ angle_correction_end
- clearance_total


âœ‚ï¸ LOGIKA KÄ„TÃ“W
KaÅ¼dy koniec:
cut_angle
source:
 - BEAD_FACE
 - MUNTIN_FACE

zakres 10â€“40Â°.
MoÅ¼liwe rÃ³Å¼ne kÄ…ty na obu koÅ„cach.

ğŸ¨ CANVAS (VIRTUAL WINDOW)
Canvas uÅ¼ywany wyÅ‚Ä…cznie do:
edycji layoutu
wizualizacji
Canvas NIE zawiera logiki geometrycznej.

Funkcje:
zoom / pan
drag osi
snapping
grid
auto-center

Warstwy:
skrzydÅ‚o
Å›wiatÅ‚o szyby
szprosy
punkty przeciÄ™Ä‡
linie pomiarowe

â­ TRYB NIETYPOWYCH SZPROSÃ“W
Ukryty pod ikonÄ… obok ustawieÅ„.
DomyÅ›lnie niewidoczny.

Presety:
romb
krzyÅ¼ 45Â°
pajÄ™czyna (promienie z jednego punktu)
Å‚uk
sunburst
gotyk
trapez

ğŸŒ™ ÅUKI (WAÅ»NE)
Åuk NIE jest jednym elementem.
Definicja:
segments[]
- axis_length
- axis_angle

Dodatkowo:
predicted_radius

tylko informacyjnie.

ğŸ“ MONTAÅ» â€“ INSTRUKCJE
System generuje:
punkt startowy klejenia
kolejnoÅ›Ä‡ montaÅ¼u

KolejnoÅ›Ä‡:
najdÅ‚uÅ¼szy szpros
dzielÄ…ce
krzyÅ¼owe
dekoracyjne

Monter widzi:
LISTWA S3
DOCIÄ„Ä†: 786 mm
KÄ„T L: 22Â°
KÄ„T P: 15Â°

PRZYKLEIÄ†:
412 mm od lewej
643 mm od doÅ‚u


ğŸ“‹ TABELA CIÄ˜Ä†
| id | length | angleL | angleP | qty | description |
Automatyczne grupowanie identycznych.

ğŸªš OPTYMALIZACJA SZTANG
Input:
dÅ‚ugoÅ›Ä‡ sztangi
kerf piÅ‚y
do 10 skrzydeÅ‚
ZakÅ‚adamy identyczny layout.
Output:
Cut Plan
+ opis listewek


âš™ï¸ KOREKTY (MUST HAVE)
globalne:
saw_offset_mm

dla skrzydÅ‚a:
manual_window_correction

kompensacja zewn./wewn.:
top
bottom
left
right compensation


ğŸ§  WSKAZÃ“WKI MONTAÅ»OWE (ADVANCED)
Dla presetÃ³w nietypowych generowaÄ‡ instrukcjÄ™:
ROMB:
znajdÅº Å›rodek skrzydÅ‚a
przyklej pierwszy element od gÃ³ry

ğŸš« ZABRONIONE
liczenie â€na dÅ‚ugoÅ›ciachâ€
logika w canvasie
pomijanie gruboÅ›ci szprosa
procentowe pozycjonowanie UI

ğŸ¯ FINALNY EFEKT
System ma eliminowaÄ‡:
rÄ™czne dopasowywanie dÅ‚ugoÅ›ci,
zgadywanie przez montera,
poprawki na budowie.


*klik w canvas:ma dodawaÄ‡/usuwaÄ‡ szprosa,szprosy muszÄ… mieÄ‡ rÃ³wny podziaÅ‚. przyciski +pion/+poziom teÅ¼ siÄ™ przydadzÄ…
*symetria
*ma byÄ‡ zachowany pion/poziom
*opcje
*siatka opcjonalna, zoom zbÄ™dny 
*tak, chcÄ™ moÅ¼liwoÅ›Ä‡ zmiany szprosa ciÄ…gÅ‚ego
*reguÅ‚a globalna
*tak
*tak np.pion1 lewy1 (od lewej od gÃ³ry)
*tak jako luz"globalny", korekta luzu szpros-listewka, korekta luzu szpros-szpros
*kÄ…ty sÄ… skorelowane z konkretnymi listewkami przyszybowymi/szprosami do ktÃ³rych przylegajÄ…, a po stronie zewnÄ™trznej trzeba zamiast kÄ…ta listewki przyszybowej wziÄ…Ä‡ pod uwagÄ™ kÄ…t pÅ‚aszczyny skrzydÅ‚a. kÄ…ty bierzemy z parametrÃ³w w bazie danych przypisanych do konkretnego profila wiÄ™c podczas konfiguracji skrzudÅ‚a musimy wybraÄ‡ z bazy:jakie skrzydÅ‚o, jaka listewka przyszybowa, jaki szpros.
*dane na temat szprosa pobierzmy z bazy danych (szprosy to profile veka ktÃ³rych numery zaczynajÄ… siÄ™ od "109"). moÅ¼emy teÅ¼ dodaÄ‡ awaryjnÄ… opcjÄ™ wpisania parametrÃ³w szprosa rÄ™cznie (schowajmy to w ustawieniach i dodajmy przeÅ‚Ä…cznik "wpisz dane rÄ™cznie")
*pobieramy z bazy
*â€kÄ…t1 â†’ wymiar â†’ kÄ…t2 â†’ opisâ€ unikalny dla kaÅ¼dego szprosa
*tak
*chciaÅ‚bym aby wybranie szprosa na liÅ›cie ciÄ™Ä‡ podÅ›wietlaÅ‚ go na wirtualnym skrzydle
*opcja eksportu do pdf/lub natychmiastowego druku (na poÅ‚Ä…czonej drukace zebra .bÄ™dzie poÅ‚Ä…czona z apklacjÄ…- w pszyszÅ‚oÅ›ci) naklejek 40x100.kazda to osobny element 
*zawsze podajemy wymiary
* tak zawsze musimy wybraÄ‡ profile to ma wpÅ‚yw na wymiary docelowe
*tak ale dodajmy je do instniejÄ…cych juÅ¼ presetÃ³w. podstawÄ… ma byÄ‡ rÄ™czne wskazanie ukÄ…Å‚du na canvasie
*nie zaglÄ…damy do magazynu 
*tak
*jak wolisz, zrÃ³b tak aby kod umoÅ¼liwiaÅ‚ Å‚atwÄ… refaktoryzacjÄ™
*moÅ¼e oddzielmy te dwie funkcje, zrÃ³bmy w nawigacji "szprosy proste", "szprosy skoÅ›ne"
*w "prostym tylko proste"
+do listy ciÄ™Ä‡ dodajmy moÅ¼liwoÅ›Ä‡ optymalizacji dla kolejnych 10 skrzydeÅ‚ "po podaniu ich wymiarÃ³w", wymiar sztangi w ustawieniach